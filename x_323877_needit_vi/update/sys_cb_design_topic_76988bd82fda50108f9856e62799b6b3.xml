<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__ba988bd8b8da5010fae4c1e8bea0cbaf">7e988bd82fda50108f9856e62799b6b0</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"d0300cdf8a4e47a3aec33ca6f606268c","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"d0300cdf8a4e47a3aec33ca6f606268c"}],"goals":[{"name":"primary","trigger_id":"d0300cdf8a4e47a3aec33ca6f606268c","nodes":[{"type":"StartGoal","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"e9a541576437419faa1f09d72b37320e","name":"Start"},{"type":"TerminateGoal","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"cd818a4981ee4ff18ce1686b6e92ded7","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"96eaee97ba8642c5a3c39d82e4ed3f18","name":"Needit Type","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"93fa5459c49d42b1912cb062f16791d5","message":{"type":"String","mode":"string","value":"Which type of NeedIt record would you like to view?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"You selected:{{vaInputs.needit_type}}"},"id":"5a8d82997a24422385b9532f9c903f23","name":"Confirm NeedIt Type","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"4f6759a780dc4a63920401d1f8881006","name":"NeedIt List","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"a6e8bd1304654cea928010c898baac73","message":{"type":"String","mode":"string","value":"Select a Needit Record to view."},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"expression_mode":"script","script":"(function execute(table) {\n    // u_requested_for. Order the results by the When needed value.\n\tvar options = [];\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    // u_requested_for. Order the results by the When needed value.\n\tvar options = [];\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"a6e8bd1304654cea928010c898baac73","fields":["priority","short_description","u_when_needed"],"id":"f6760928c2574712990b009616809ca7","name":"NeedIt Card","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"947ad8f256da4daf9dc9362ac044c156","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"63b9375c443a476989f7de50c45ec6a0","name":"Search Again","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"aefd27af310c4b309bc05020572d58c0","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"7d64d8c8bb244a5fbea724754c589537","name":"Yes"}],"id":"bbdfc71f2ece40fb8d2bfa12a4da0bd4","goal_id":"2ba5a3784b6c40c88c2fbc796d487744"},{"type":"InputPrompt","variable_id":"2606f7cda5f9434883ca18ce473e0993","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"11a9e9a197334c4281c71ddc22b02224","name":"New When Needed Date","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"a6e8bd1304654cea928010c898baac73","id":"63bff3f918a94e508099d121debe7ace","name":"Change When Needed Date","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"a6e8bd1304654cea928010c898baac73","fields":["u_when_needed"],"id":"d537aa50179445019721d62952308d22","name":"Update Needit","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"b6de1234390b4799b2e1f729d2e1bb7c","name":"What to Update","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"14f4b27d990b4bb2aff389fb0ed0e11f","message":{"type":"String","mode":"string","value":"Select field to be updated"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"When Needed","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when_needed"},"id":"64cab0cf028e4520b407202d50f1ed60","name":"When Needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"416c463319bc4ee4a33fe0eea31cbdf7","name":"Nothing"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=short_description"},"id":"aa9cef6315a54f15b348e705a0e46edf","name":"Short Description"}],"id":"6a1b1d5eb10a4147ad7ab1b7243a7598","goal_id":"2ba5a3784b6c40c88c2fbc796d487744"},{"type":"InputPrompt","variable_id":"656cc426ddcf4b11bd3b98359f10aa9c","message":{"type":"String","mode":"string","value":"Please provide updated short description"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"f8533a82f53f49af9082e5212cd35218","name":"New Short description","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"a6e8bd1304654cea928010c898baac73","id":"6d93fbcd6de34b8ca160fa67475db490","name":"Change Short Description","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a \n       record based on conditional logic:\n    \n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.search_count = vaVars.search_count + 1;\n})()\n","id":"9ecb05334bf940ad8091f34121ebd8c7","name":"Update search_count","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Count decision","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if (vaVars.search_count &lt; 1)\n    {\n    return true;\n    }\n    else {\n        return false;\n    }\n})()\n"},"id":"3aeb53d1f4d4499899b2c71fdffcfec0","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if (vaVars.search_count &gt; 1)\n    {\n    return true;\n    }\n    else {\n        return false;\n    }\n})()\n"},"id":"da491968a523416ca1252736ada30812","name":"No"}],"id":"51712aea5e0c4acda3ba0967fe8d856c","goal_id":"2ba5a3784b6c40c88c2fbc796d487744"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    if (vaSystem.isLiveAgentAvailable())\n    {\n        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.';\n    }\n    else {\n    return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.';\n    }\n})()\n"},"id":"7ee7662460a24153a55dac68113468e2","name":"Quota Reached","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a \n       record based on conditional logic:\n    \n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaSystem.connectToAgent()\n})()\n","id":"d449689dd7de4408be78499bebcf028b","name":"Transfer to Agent","goal_id":"2ba5a3784b6c40c88c2fbc796d487744","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run \n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n    */\n     if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n   \n})()\n"}}],"edges":[{"type":"Edge","source_node_id":"e9a541576437419faa1f09d72b37320e","target_node_id":"96eaee97ba8642c5a3c39d82e4ed3f18","id":"7c6646110d9e4ad99be142d3182f36d1"},{"type":"Edge","source_node_id":"96eaee97ba8642c5a3c39d82e4ed3f18","target_node_id":"5a8d82997a24422385b9532f9c903f23","id":"4eecce9a528b4a2a8a24adf1d412846d"},{"type":"Edge","source_node_id":"5a8d82997a24422385b9532f9c903f23","target_node_id":"4f6759a780dc4a63920401d1f8881006","id":"0757579ed854475e8ab167a29ad1ac9a"},{"type":"Edge","source_node_id":"4f6759a780dc4a63920401d1f8881006","target_node_id":"f6760928c2574712990b009616809ca7","id":"571509dfb5264b7b90e17d20be02b086"},{"type":"Edge","source_node_id":"63b9375c443a476989f7de50c45ec6a0","target_node_id":"bbdfc71f2ece40fb8d2bfa12a4da0bd4","id":"19bf9254943f491c908629d84d9afdf2"},{"type":"Edge","source_node_id":"bbdfc71f2ece40fb8d2bfa12a4da0bd4","target_node_id":"cd818a4981ee4ff18ce1686b6e92ded7","branch_id":"aefd27af310c4b309bc05020572d58c0","id":"ad55496e5b0c4557bee2d5c5e33a1111","name":"aefd27af310c4b309bc05020572d58c0"},{"type":"Edge","source_node_id":"11a9e9a197334c4281c71ddc22b02224","target_node_id":"63bff3f918a94e508099d121debe7ace","id":"abf89d9c9e6c4d96b454719a96348428"},{"type":"Edge","source_node_id":"63bff3f918a94e508099d121debe7ace","target_node_id":"d537aa50179445019721d62952308d22","id":"4508f55f0d5c4628b84a2ab4e1e6f682"},{"type":"Edge","source_node_id":"d537aa50179445019721d62952308d22","target_node_id":"63b9375c443a476989f7de50c45ec6a0","id":"e266008b06ea4a55be8a3197d6b2f102"},{"type":"Edge","source_node_id":"f6760928c2574712990b009616809ca7","target_node_id":"b6de1234390b4799b2e1f729d2e1bb7c","id":"74e725c490f947a39d114e546fba7458"},{"type":"Edge","source_node_id":"b6de1234390b4799b2e1f729d2e1bb7c","target_node_id":"6a1b1d5eb10a4147ad7ab1b7243a7598","id":"8191555d1ec9470d9a54c4a37c7aa1f4"},{"type":"Edge","source_node_id":"6a1b1d5eb10a4147ad7ab1b7243a7598","target_node_id":"11a9e9a197334c4281c71ddc22b02224","branch_id":"64cab0cf028e4520b407202d50f1ed60","id":"5d165d2a409b40d2bf844bdf816cd9fb","name":"64cab0cf028e4520b407202d50f1ed60"},{"type":"Edge","source_node_id":"6a1b1d5eb10a4147ad7ab1b7243a7598","target_node_id":"cd818a4981ee4ff18ce1686b6e92ded7","branch_id":"416c463319bc4ee4a33fe0eea31cbdf7","id":"a9da9a4410934d0194f03f7a19f065f2","name":"416c463319bc4ee4a33fe0eea31cbdf7"},{"type":"Edge","source_node_id":"6a1b1d5eb10a4147ad7ab1b7243a7598","target_node_id":"f8533a82f53f49af9082e5212cd35218","branch_id":"aa9cef6315a54f15b348e705a0e46edf","id":"f2ad286164244ea6b4c26ba21050443c","name":"aa9cef6315a54f15b348e705a0e46edf"},{"type":"Edge","source_node_id":"f8533a82f53f49af9082e5212cd35218","target_node_id":"6d93fbcd6de34b8ca160fa67475db490","id":"4d61b831f529467ca6ccf5b64bbd7769"},{"type":"Edge","source_node_id":"6d93fbcd6de34b8ca160fa67475db490","target_node_id":"d537aa50179445019721d62952308d22","id":"13523055aecf4ccabac0b42ce069b353"},{"type":"Edge","source_node_id":"bbdfc71f2ece40fb8d2bfa12a4da0bd4","target_node_id":"9ecb05334bf940ad8091f34121ebd8c7","branch_id":"7d64d8c8bb244a5fbea724754c589537","id":"53567d87dead45e58d30de179418251d","name":"7d64d8c8bb244a5fbea724754c589537"},{"type":"Edge","source_node_id":"9ecb05334bf940ad8091f34121ebd8c7","target_node_id":"51712aea5e0c4acda3ba0967fe8d856c","id":"d5389790c08d4c61aea6d047c50ab834"},{"type":"Edge","source_node_id":"51712aea5e0c4acda3ba0967fe8d856c","target_node_id":"96eaee97ba8642c5a3c39d82e4ed3f18","branch_id":"3aeb53d1f4d4499899b2c71fdffcfec0","id":"12590c5d1fc84a8fb51b34e18f3da020","name":"3aeb53d1f4d4499899b2c71fdffcfec0"},{"type":"Edge","source_node_id":"51712aea5e0c4acda3ba0967fe8d856c","target_node_id":"7ee7662460a24153a55dac68113468e2","branch_id":"da491968a523416ca1252736ada30812","id":"e6e108946c164ffd86341dfbc4c26efa","name":"da491968a523416ca1252736ada30812"},{"type":"Edge","source_node_id":"7ee7662460a24153a55dac68113468e2","target_node_id":"d449689dd7de4408be78499bebcf028b","id":"35e4c71fdb82496c8d09d0f5940b8079"},{"type":"Edge","source_node_id":"d449689dd7de4408be78499bebcf028b","target_node_id":"cd818a4981ee4ff18ce1686b6e92ded7","id":"7482dc1a8ac34e46977567d1e8e4ab8d"}],"id":"2ba5a3784b6c40c88c2fbc796d487744"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"7720e85a2c41401899a2c5b7bde26a48"}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"93fa5459c49d42b1912cb062f16791d5","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"a6e8bd1304654cea928010c898baac73","name":"needit_list"},{"type":"True/False","id":"947ad8f256da4daf9dc9362ac044c156","name":"search_again"},{"type":"Date/Time","mode":"date","id":"2606f7cda5f9434883ca18ce473e0993","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"188a517dddc647958e63b88f717d6742","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short Description","element":"short_description"},{"name":"When Needed","element":"when_needed"},{"name":"Nothing","element":"nothing"}],"id":"14f4b27d990b4bb2aff389fb0ed0e11f","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"656cc426ddcf4b11bd3b98359f10aa9c"},{"type":"Reference","table":"x_58872_needit_needit","id":"46eaecf169164f5db34f89f5294eafce","name":"change_short_description"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"aa7fabde2fc650108f9856e62799b6c9","domain":"global","id":"6780f7da2fc650108f9856e62799b6eb","name":"_PRVW__ba988bd8b8da5010fae4c1e8bea0cbaf","key_phrases":["View Open NeedIt Records","need something","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_category":"efafa3122f0a50108f9856e62799b6ad","library":false}</design_definition>
        <design_topic_id>6780f7da2fc650108f9856e62799b6eb</design_topic_id>
        <name>_PRVW__ba988bd8b8da5010fae4c1e8bea0cbaf</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-07-25 12:45:49</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>76988bd82fda50108f9856e62799b6b3</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_323877_needit_vi">aa7fabde2fc650108f9856e62799b6c9</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">aa7fabde2fc650108f9856e62799b6c9</sys_scope>
        <sys_update_name>sys_cb_design_topic_76988bd82fda50108f9856e62799b6b3</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-07-25 12:45:49</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
